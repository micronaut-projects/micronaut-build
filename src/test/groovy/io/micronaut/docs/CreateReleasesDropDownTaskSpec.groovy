package io.micronaut.docs

import io.micronaut.build.docs.CreateReleasesDropdownTask
import spock.lang.Specification

class CreateReleasesDropDownTaskSpec extends Specification {

    void "for micronaut-projects/micronaut-core docs.micronaut.io is used not gihtub pages url"() {
        given:
        String html = CreateReleasesDropdownTask.composeSelectHtml(
                '''[{"name":"v3.1.3","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.1.3","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.1.3","commit":{"sha":"6a52d983f3e16ca6010c049d47daca93b467f657","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/6a52d983f3e16ca6010c049d47daca93b467f657"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4xLjM="},{"name":"v3.1.2","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.1.2","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.1.2","commit":{"sha":"55a72f83777ab38f5e31f9c3893758a152d81409","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/55a72f83777ab38f5e31f9c3893758a152d81409"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4xLjI="},{"name":"v3.1.1","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.1.1","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.1.1","commit":{"sha":"795b2901e73bb61976b6d6ab16d0880e948af353","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/795b2901e73bb61976b6d6ab16d0880e948af353"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4xLjE="},{"name":"v3.1.0","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.1.0","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.1.0","commit":{"sha":"7eb19dd184d732a4b35915c1d739fc64be67e7af","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/7eb19dd184d732a4b35915c1d739fc64be67e7af"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4xLjA="},{"name":"v3.0.3","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.3","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.3","commit":{"sha":"079ec811a0e6637445535dad534e622b49e7ed61","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/079ec811a0e6637445535dad534e622b49e7ed61"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjM="},{"name":"v3.0.2","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.2","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.2","commit":{"sha":"4d78d8d18c0ee6609bcc7a53e05c7925e0497bf9","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/4d78d8d18c0ee6609bcc7a53e05c7925e0497bf9"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjI="},{"name":"v3.0.1","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.1","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.1","commit":{"sha":"b6dafcf5e11e0ab11c051cec8473daf481c7a365","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/b6dafcf5e11e0ab11c051cec8473daf481c7a365"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjE="},{"name":"v3.0.0","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0","commit":{"sha":"ce0468010c3d012a564b0419cee3f074745d8255","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/ce0468010c3d012a564b0419cee3f074745d8255"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjA="},{"name":"v3.0.0-RC1","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-RC1","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-RC1","commit":{"sha":"bec0593a3616792826c9588a6f2883fc7de8b8cd","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/bec0593a3616792826c9588a6f2883fc7de8b8cd"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtUkMx"},{"name":"v3.0.0-M5","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-M5","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-M5","commit":{"sha":"fececca83a9cda83ca8b91bf7b4ed19e69d962dc","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/fececca83a9cda83ca8b91bf7b4ed19e69d962dc"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtTTU="},{"name":"v3.0.0-M4","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-M4","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-M4","commit":{"sha":"f31e05ef07941903e1f16b31c9ea8d0a38318e2d","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/f31e05ef07941903e1f16b31c9ea8d0a38318e2d"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtTTQ="},{"name":"v3.0.0-M3","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-M3","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-M3","commit":{"sha":"f19c71aa8140d9c698a12536835668d5b6a8be32","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/f19c71aa8140d9c698a12536835668d5b6a8be32"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtTTM="},{"name":"v3.0.0-M2","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-M2","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-M2","commit":{"sha":"937e95cb487b14f029fe1935d10204fbd50c3f24","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/937e95cb487b14f029fe1935d10204fbd50c3f24"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtTTI="},{"name":"v3.0.0-M1","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v3.0.0-M1","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v3.0.0-M1","commit":{"sha":"bbcb1ef1c3b9fe7a42c4f0f1b6c07ba55ac8be95","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/bbcb1ef1c3b9fe7a42c4f0f1b6c07ba55ac8be95"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92My4wLjAtTTE="},{"name":"v2.5.13","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.13","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.13","commit":{"sha":"201937defa57bc5eed2612894c69d0991fcb922d","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/201937defa57bc5eed2612894c69d0991fcb922d"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjEz"},{"name":"v2.5.12","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.12","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.12","commit":{"sha":"c416f829cb2f6cca7321b2d94c902260ee160fbc","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/c416f829cb2f6cca7321b2d94c902260ee160fbc"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjEy"},{"name":"v2.5.11","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.11","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.11","commit":{"sha":"f18f87c58eef70f53f8acb9d172bb31342bcbceb","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/f18f87c58eef70f53f8acb9d172bb31342bcbceb"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjEx"},{"name":"v2.5.10","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.10","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.10","commit":{"sha":"e8581ec2f7aa4205acf683fd0b09bd42072d7a30","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/e8581ec2f7aa4205acf683fd0b09bd42072d7a30"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjEw"},{"name":"v2.5.9","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.9","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.9","commit":{"sha":"808a868902e58d343c5b38922088920a4236e580","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/808a868902e58d343c5b38922088920a4236e580"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41Ljk="},{"name":"v2.5.8","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.8","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.8","commit":{"sha":"a1135fa1e6499a5d195126a07220cfe26bd9f47f","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/a1135fa1e6499a5d195126a07220cfe26bd9f47f"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41Ljg="},{"name":"v2.5.7","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.7","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.7","commit":{"sha":"498d521d923563ebf6335dd1263cf6c901ed2c32","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/498d521d923563ebf6335dd1263cf6c901ed2c32"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41Ljc="},{"name":"v2.5.6","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.6","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.6","commit":{"sha":"f4d537aec506d3e7215fb42f75a82bcf9f4c13f8","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/f4d537aec506d3e7215fb42f75a82bcf9f4c13f8"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjY="},{"name":"v2.5.5","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.5","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.5","commit":{"sha":"9aeca6fb8d856a3dcdb208fec8798ea58ea83d12","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/9aeca6fb8d856a3dcdb208fec8798ea58ea83d12"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjU="},{"name":"v2.5.4","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.4","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.4","commit":{"sha":"705277a4aca9ec9a253c4b3337a4fa80db494489","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/705277a4aca9ec9a253c4b3337a4fa80db494489"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjQ="},{"name":"v2.5.3","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.3","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.3","commit":{"sha":"3fe4a774bb5b606fecb1b429bbfe4d76d80325bd","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/3fe4a774bb5b606fecb1b429bbfe4d76d80325bd"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjM="},{"name":"v2.5.2","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.2","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.2","commit":{"sha":"c5db30502de2210c19e4c4ef8d8f1417ce4a720a","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/c5db30502de2210c19e4c4ef8d8f1417ce4a720a"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjI="},{"name":"v2.5.1","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.1","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.1","commit":{"sha":"19da8ba59c773c16ed2833d35faa83c069ad23aa","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/19da8ba59c773c16ed2833d35faa83c069ad23aa"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjE="},{"name":"v2.5.0","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.5.0","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.5.0","commit":{"sha":"6be683f37bc0270212c4d8df7d06e30859316413","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/6be683f37bc0270212c4d8df7d06e30859316413"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi41LjA="},{"name":"v2.4.4","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.4.4","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.4.4","commit":{"sha":"03ebc2b1542486e6e6f239797611c140fe5f23e1","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/03ebc2b1542486e6e6f239797611c140fe5f23e1"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi40LjQ="},{"name":"v2.4.3","zipball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/zipball/refs/tags/v2.4.3","tarball_url":"https://api.github.com/repos/micronaut-projects/micronaut-core/tarball/refs/tags/v2.4.3","commit":{"sha":"880d467e76d8c6f663a3ed6d0d72309214b292e1","url":"https://api.github.com/repos/micronaut-projects/micronaut-core/commits/880d467e76d8c6f663a3ed6d0d72309214b292e1"},"node_id":"MDM6UmVmMTI0MjMwMjA0OnJlZnMvdGFncy92Mi40LjM="}]''',
                'micronaut-projects/micronaut-core',
                '2.0.1')
        expect:
        html.contains('https://docs.micronaut.io/snapshot/guide/index.html')
        !html.contains('https://micronaut-projects.github.io/micronaut-core/snapshot/guide/index.html')
    }

}
